# etc lib
import os
import sys
import json
import glob
import joblib
import traceback
import importlib
import numpy as np

# Model 폴더 찾기 위한 방법
pathA = os.path.join(os.path.dirname(__file__), os.path.pardir)
pathB = os.path.join(os.path.join(pathA))
basePath = os.path.abspath(pathB)
# Model Path 등록

sys.path.append(basePath)

from Common.Logger.Logger import logger
from DatasetLib import DatasetLib

log = logger("log")


'''
input : {"INPUT_DATA":{"TRAIN_PATH":[{"FILE_PATH":"/Users/upload/DataSets/CT210055/iris.csv"}],"DELIMITER":",","SPLIT_YN":"Y","DATASET_SPLIT":25,"TEST_DATASET_CD":null,"TEST_PATH":null,"LABEL_COLUMN_NAME":"label","MAPING_INFO":[{"DATASET_CD":"CT210055","COLUMN_NM":"sepal width (cm)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":1,"checked":1},{"DATASET_CD":"CT210055","COLUMN_NM":"sepal length (cm)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":2,"checked":1},{"DATASET_CD":"CT210055","COLUMN_NM":"petal width (cm)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":3,"checked":1},{"DATASET_CD":"CT210055","COLUMN_NM":"petal length (cm)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":4,"checked":1},{"DATASET_CD":"CT210055","COLUMN_NM":"label","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":1,"COLUMN_IDX":5,"checked":1}]},"SERVER_PARAM":{"AI_CD":"RT20210091","AI_PATH":"/Users/upload/AiModel/RT20210091","SRV_IP":"127.0.0.1","SRV_PORT":10236},"MODEL_INFO":[{"DATA_TYPE":"T","OBJECT_TYPE":"F","FE_TYPE":"R","MODEL_NAME":"FEATURE_SELECTION","MODEL_TYPE":"FE","MDL_ALIAS":"FEATURE_SELECTION_0","MDL_IDX":0,"MDL_PATH":"Network/Tabular/FEATURE_ENGINEERING/FEATURE_EXTRACTION/PCA"}]}

output : 
    1) FEATURE_SELECTION: {"COLUMN_INFO": [{"COLUMN_NAME": "petal width (cm)", "VALUE": "0.4177451410401348", "RANK": "1"}, {"COLUMN_NAME": "petal length (cm)", "VALUE": "0.3993730392727437", "RANK": "2"}], "SERVER_PARAM": {"AI_CD": "RT20210091", "AI_PATH": "/Users/upload/AiModel/RT20210091", "SRV_IP": "127.0.0.1", "SRV_PORT": 10236}, "MODEL_INFO": {"MODEL_NAME": "FEATURE_SELECTION", "MODEL_TYPE": "FE", "DATA_TYPE": "T", "FE_TYPE": "C", "THRESHOLD": 0.05, "COMPONENT_COUNT": 2}}
    2) FEATURE_EXTRACTION: {"COLUMN_INFO": [], "SERVER_PARAM": {"AI_CD": "RT20210091", "AI_PATH": "/Users/upload/AiModel/RT20210091", "SRV_IP": "127.0.0.1", "SRV_PORT": 10236}, "MODEL_INFO": {"MODEL_NAME": "PCA", "MODEL_TYPE": "FE", "DATA_TYPE": "T", "FE_TYPE": "R", "THRESHOLD": 0.95, "COMPONENT_COUNT": 2}}
'''

# main
if __name__ == "__main__":
    # boston_pca
    # data = '{"INPUT_DATA":{"TRAIN_PATH":[{"FILE_PATH":"/Users/upload/DataSets/RT210014/boston.csv"}],"DELIMITER":",","SPLIT_YN":"Y","DATASET_SPLIT":25,"TEST_DATASET_CD":null,"TEST_PATH":null,"LABEL_COLUMN_NAME":"label","MAPING_INFO":[{"DATASET_CD":"RT210111","COLUMN_NM":"crim","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"zn","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"indus","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"chas","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"nox","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"rm","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"age","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"dis","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"rad","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"tax","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"ptratio","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"b","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"lstat","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"label","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1}]},"SERVER_PARAM":{"AI_CD":"RT20210091","AI_PATH":"/Users/upload/AiModel/RT20210091","SRV_IP":"127.0.0.1","SRV_PORT":10236},"MODEL_INFO":[{"DATA_TYPE":"T","OBJECT_TYPE":"F","FE_TYPE":"R","MODEL_NAME":"FEATURE_SELECTION","MODEL_TYPE":"FE","MDL_ALIAS":"FEATURE_SELECTION_0","MDL_IDX":0,"MDL_PATH":"Network/Tabular/FEATURE_ENGINEERING/FEATURE_EXTRACTION/PCA"}]}'
    # boston_fs
    # data = '{"INPUT_DATA":{"TRAIN_PATH":[{"FILE_PATH":"/Users/upload/DataSets/RT210014/boston.csv"}],"DELIMITER":",","SPLIT_YN":"Y","DATASET_SPLIT":25,"TEST_DATASET_CD":null,"TEST_PATH":null,"LABEL_COLUMN_NAME":"label","MAPING_INFO":[{"DATASET_CD":"RT210111","COLUMN_NM":"crim","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"zn","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"indus","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"chas","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"nox","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"rm","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"age","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"dis","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"rad","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"tax","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"ptratio","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"b","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"lstat","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1},{"DATASET_CD":"RT210111","COLUMN_NM":"label","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"checked":1}]},"SERVER_PARAM":{"AI_CD":"RT20210091","AI_PATH":"/Users/upload/AiModel/RT20210091","SRV_IP":"127.0.0.1","SRV_PORT":10236},"MODEL_INFO":[{"DATA_TYPE":"T","OBJECT_TYPE":"F","FE_TYPE":"R","MODEL_NAME":"FEATURE_SELECTION","MODEL_TYPE":"FE","MDL_ALIAS":"FEATURE_SELECTION_0","MDL_IDX":0,"MDL_PATH":"Network/Tabular/FEATURE_ENGINEERING/FEATURE_SELECTION"}]}'
    
    # iris_pca
    # data = '{"INPUT_DATA":{"TRAIN_PATH":[{"FILE_PATH":"/Users/upload/DataSets/CT210055/iris.csv"}],"DELIMITER":",","SPLIT_YN":"Y","DATASET_SPLIT":25,"TEST_DATASET_CD":null,"TEST_PATH":null,"LABEL_COLUMN_NAME":"label","MAPING_INFO":[{"DATASET_CD":"CT210055","COLUMN_NM":"sepal length (cm)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":1,"checked":1},{"DATASET_CD":"CT210055","COLUMN_NM":"sepal width (cm)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":2,"checked":1},{"DATASET_CD":"CT210055","COLUMN_NM":"petal length (cm)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":3,"checked":1},{"DATASET_CD":"CT210055","COLUMN_NM":"petal width (cm)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":4,"checked":1},{"DATASET_CD":"CT210055","COLUMN_NM":"label","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":1,"COLUMN_IDX":5,"checked":1}]},"SERVER_PARAM":{"AI_CD":"RT20210091","AI_PATH":"/Users/upload/AiModel/RT20210091","SRV_IP":"127.0.0.1","SRV_PORT":10236},"MODEL_INFO":[{"DATA_TYPE":"T","OBJECT_TYPE":"F","FE_TYPE":"R","MODEL_NAME":"FEATURE_SELECTION","MODEL_TYPE":"FE","MDL_ALIAS":"FEATURE_SELECTION_0","MDL_IDX":0,"MDL_PATH":"Network/Tabular/FEATURE_ENGINEERING/FEATURE_EXTRACTION/PCA"}]}'
    # iris_fs
    # data= '{"INPUT_DATA":{"TRAIN_PATH":[{"FILE_PATH":"/Users/upload/DataSets/CT210055/iris.csv"}],"DELIMITER":",","SPLIT_YN":"Y","DATASET_SPLIT":25,"TEST_DATASET_CD":null,"TEST_PATH":null,"LABEL_COLUMN_NAME":"label","MAPING_INFO":[{"DATASET_CD":"CT210055","COLUMN_NM":"sepal length (cm)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":1,"checked":1},{"DATASET_CD":"CT210055","COLUMN_NM":"sepal width (cm)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":2,"checked":1},{"DATASET_CD":"CT210055","COLUMN_NM":"petal length (cm)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":3,"checked":1},{"DATASET_CD":"CT210055","COLUMN_NM":"petal width (cm)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":4,"checked":1},{"DATASET_CD":"CT210055","COLUMN_NM":"label","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":1,"COLUMN_IDX":5,"checked":1}]},"SERVER_PARAM":{"AI_CD":"RT20210091","AI_PATH":"/Users/upload/AiModel/RT20210091","SRV_IP":"127.0.0.1","SRV_PORT":10236},"MODEL_INFO":[{"DATA_TYPE":"T","OBJECT_TYPE":"F","FE_TYPE":"R","MODEL_NAME":"FEATURE_SELECTION","MODEL_TYPE":"FE","MDL_ALIAS":"FEATURE_SELECTION_0","MDL_IDX":0,"MDL_PATH":"Network/Tabular/FEATURE_ENGINEERING/FEATURE_SELECTION"}]}'
    
    # dtr_pca
    # data = '{"INPUT_DATA":{"TRAIN_PATH":[{"FILE_PATH":"/Users/upload/DataSets/RT210026/DTR_FINAL.csv"}],"DELIMITER":",","SPLIT_YN":"Y","DATASET_SPLIT":25,"TEST_DATASET_CD":null,"TEST_PATH":null,"LABEL_COLUMN_NAME":"Ks","MAPING_INFO":[{"DATASET_CD":"RT210026","COLUMN_NM":"Degas 1st CurrentCount","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"MainPress SV","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"UpperHeatPlate1 _Temp_SV","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"MoldingCountCurrentValue_PV","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"LowerHeatPlate3 _Temp_SV","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"C_ML14(CMB)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"C_t5_sec(CMB)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"C_Tmax(CMB)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"C_t90_Sec(CMB)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"C_Hard(CMB)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"C_Elong(CMB)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"C_Tensile(CMB)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"S_ML14(SM)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"S_t5(SM)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"S_Tmin(SM)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"S_Tmax(SM)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"S_t10(SM)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"S_Hard(SM)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"S_SG(SM)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"S_Elong(SM)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"S_Tensile(SM)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"S_M100(SM)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":1,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"S_M300(SM)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"Ks","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1}]},"SERVER_PARAM":{"AI_CD":"RT20210091","AI_PATH":"/Users/upload/AiModel/RT20210091","SRV_IP":"127.0.0.1","SRV_PORT":10236},"MODEL_INFO":[{"DATA_TYPE":"T","OBJECT_TYPE":"F","FE_TYPE":"R","MODEL_NAME":"FEATURE_SELECTION","MODEL_TYPE":"FE","MDL_ALIAS":"FEATURE_SELECTION_0","MDL_IDX":0,"MDL_PATH":"Network/Tabular/FEATURE_ENGINEERING/FEATURE_EXTRACTION/PCA"}]}'
    # dtr_fs
    # data = '{"INPUT_DATA":{"TRAIN_PATH":[{"FILE_PATH":"/Users/upload/DataSets/RT210026/DTR_FINAL.csv"}],"DELIMITER":",","SPLIT_YN":"Y","DATASET_SPLIT":25,"TEST_DATASET_CD":null,"TEST_PATH":null,"LABEL_COLUMN_NAME":"Ks","MAPING_INFO":[{"DATASET_CD":"RT210026","COLUMN_NM":"Degas 1st CurrentCount","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"MainPress SV","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"UpperHeatPlate1 _Temp_SV","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"MoldingCountCurrentValue_PV","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"LowerHeatPlate3 _Temp_SV","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"C_ML14(CMB)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"C_t5_sec(CMB)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"C_Tmax(CMB)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"C_t90_Sec(CMB)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"C_Hard(CMB)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"C_Elong(CMB)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"C_Tensile(CMB)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"S_ML14(SM)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"S_t5(SM)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"S_Tmin(SM)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"S_Tmax(SM)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"S_t10(SM)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"S_Hard(SM)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"S_SG(SM)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"S_Elong(SM)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"S_Tensile(SM)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"S_M100(SM)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":1,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"S_M300(SM)","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"RT210026","COLUMN_NM":"Ks","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1}]},"SERVER_PARAM":{"AI_CD":"RT20210091","AI_PATH":"/Users/upload/AiModel/RT20210091","SRV_IP":"127.0.0.1","SRV_PORT":10236},"MODEL_INFO":[{"DATA_TYPE":"T","OBJECT_TYPE":"F","FE_TYPE":"R","MODEL_NAME":"FEATURE_SELECTION","MODEL_TYPE":"FE","MDL_ALIAS":"FEATURE_SELECTION_0","MDL_IDX":0,"MDL_PATH":"Network/Tabular/FEATURE_ENGINEERING/FEATURE_SELECTION"}]}'
    
    # kdd_pca
    # data = '{"INPUT_DATA":{"TRAIN_PATH":[{"FILE_PATH":"/Users/upload/DataSets/CT210066/kddcup99_csv.csv"}],"DELIMITER":",","SPLIT_YN":"Y","DATASET_SPLIT":25,"TEST_DATASET_CD":null,"TEST_PATH":null,"LABEL_COLUMN_NAME":"label","MAPING_INFO":[{"DATASET_CD":"CT210066","COLUMN_NM":"duration","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"protocol_type","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":1,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"service","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":2,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"flag","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":3,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"src_bytes","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":4,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"dst_bytes","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":5,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"land","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":6,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"wrong_fragment","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":7,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"urgent","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":8,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"hot","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":9,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"num_failed_logins","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":10,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"logged_in","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":11,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"lnum_compromised","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":12,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"lroot_shell","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":13,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"lsu_attempted","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":14,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"lnum_root","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":15,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"lnum_file_creations","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":16,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"lnum_shells","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":17,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"lnum_access_files","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":18,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"lnum_outbound_cmds","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":19,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"is_host_login","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":20,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"is_guest_login","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":21,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"count","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":22,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"srv_count","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":23,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"serror_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":24,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"srv_serror_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":25,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"rerror_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":26,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"srv_rerror_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":27,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"same_srv_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":28,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"diff_srv_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":29,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"srv_diff_host_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":30,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"dst_host_count","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":31,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"dst_host_srv_count","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":32,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"dst_host_same_srv_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":33,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"dst_host_diff_srv_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":34,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"dst_host_same_src_port_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":35,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"dst_host_srv_diff_host_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":36,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"dst_host_serror_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":37,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"dst_host_srv_serror_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":38,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"dst_host_rerror_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":39,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"dst_host_srv_rerror_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":40,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"label","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":1,"COLUMN_IDX":41,"checked":1}]},"SERVER_PARAM":{"AI_CD":"RT20210091","AI_PATH":"/Users/upload/AiModel/RT20210091","SRV_IP":"127.0.0.1","SRV_PORT":10236},"MODEL_INFO":[{"DATA_TYPE":"T","OBJECT_TYPE":"F","FE_TYPE":"R","MODEL_NAME":"FEATURE_SELECTION","MODEL_TYPE":"FE","MDL_ALIAS":"FEATURE_SELECTION_0","MDL_IDX":0,"MDL_PATH":"Network/Tabular/FEATURE_ENGINEERING/FEATURE_EXTRACTION/PCA"}]}'
    # kdd_fs
    # data = '{"INPUT_DATA":{"TRAIN_PATH":[{"FILE_PATH":"/Users/upload/DataSets/CT210066/kddcup99_csv.csv"}],"DELIMITER":",","SPLIT_YN":"Y","DATASET_SPLIT":25,"TEST_DATASET_CD":null,"TEST_PATH":null,"LABEL_COLUMN_NAME":"label","MAPING_INFO":[{"DATASET_CD":"CT210066","COLUMN_NM":"duration","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":0,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"protocol_type","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":1,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"service","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":2,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"flag","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":3,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"src_bytes","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":4,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"dst_bytes","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":5,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"land","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":6,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"wrong_fragment","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":7,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"urgent","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":8,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"hot","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":9,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"num_failed_logins","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":10,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"logged_in","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":11,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"lnum_compromised","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":12,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"lroot_shell","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":13,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"lsu_attempted","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":14,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"lnum_root","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":15,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"lnum_file_creations","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":16,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"lnum_shells","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":17,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"lnum_access_files","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":18,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"lnum_outbound_cmds","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":19,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"is_host_login","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":20,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"is_guest_login","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":21,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"count","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":22,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"srv_count","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":23,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"serror_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":24,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"srv_serror_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":25,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"rerror_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":26,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"srv_rerror_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":27,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"same_srv_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":28,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"diff_srv_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":29,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"srv_diff_host_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":30,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"dst_host_count","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":31,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"dst_host_srv_count","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":32,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"dst_host_same_srv_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":33,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"dst_host_diff_srv_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":34,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"dst_host_same_src_port_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":35,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"dst_host_srv_diff_host_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":36,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"dst_host_serror_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":37,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"dst_host_srv_serror_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":38,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"dst_host_rerror_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":39,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"dst_host_srv_rerror_rate","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":0,"COLUMN_IDX":40,"checked":1},{"DATASET_CD":"CT210066","COLUMN_NM":"label","COLUMN_ALIAS":null,"DEFAULT_VALUE":null,"IS_CLASS":1,"COLUMN_IDX":41,"checked":1}]},"SERVER_PARAM":{"AI_CD":"RT20210091","AI_PATH":"/Users/upload/AiModel/RT20210091","SRV_IP":"127.0.0.1","SRV_PORT":10236},"MODEL_INFO":[{"DATA_TYPE":"T","OBJECT_TYPE":"F","FE_TYPE":"C","MODEL_NAME":"FEATURE_SELECTION","MODEL_TYPE":"FE","MDL_ALIAS":"FEATURE_SELECTION_0","MDL_IDX":0,"MDL_PATH":"Network/Tabular/FEATURE_ENGINEERING/FEATURE_SELECTION"}]}'

    # param = json.loads(data)
    param = json.loads(sys.argv[1])    
    param["MODEL_INFO"] = param["MODEL_INFO"][0]

    modulePath = param["MODEL_INFO"]["MDL_PATH"]
    modulePath = modulePath.replace('/', '.')
    feModule = importlib.import_module(modulePath + '.model')

    output = feModule.getFeature(param)

    print(json.dumps(output))
